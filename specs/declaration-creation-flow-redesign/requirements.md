# Requirements: Declaration Creation Flow Redesign

## Overview

שינוי תהליך יצירת הצהרה חדשה כך שפרטי הלקוח מוזנים ישירות בטופס ההצהרה (עם חיפוש אוטומטי לפי ת.ז.), והסרת עמוד הלקוחות הנפרד.

## Background

המערכת הקיימת מפרידה בין ניהול לקוחות ליצירת הצהרות:
- יש עמוד נפרד ללקוחות (`/dashboard/clients`)
- צריך ליצור לקוח **לפני** שאפשר ליצור לו הצהרה
- בטופס הצהרה יש dropdown לבחירת לקוח קיים (בלי חיפוש)

**הבעיה:** המערכת מנהלת הצהרות הון, לא לקוחות. הלקוחות הם רק "מיכל" לאחסון פרטים לצורך הצהרות עתידיות.

## Goals

1. **ביטול הפרדה בין לקוחות להצהרות** - אין צורך בעמוד לקוחות נפרד
2. **תהליך יצירה אחיד** - כל הפרטים (לקוח + הצהרה) בטופס אחד
3. **חיפוש חכם** - הקלדת ת.ז. מזהה לקוח קיים ומושכת את הפרטים
4. **יצירת לקוח אוטומטית** - אם הלקוח לא קיים, נוצר אוטומטית בעת יצירת ההצהרה

## Acceptance Criteria

### Client Fields in Declaration Form
- [ ] טופס הצהרה חדשה מציג את כל שדות הלקוח: ת.ז., שם פרטי, שם משפחה, טלפון, אימייל, כתובת, הערות
- [ ] שדה ת.ז. הוא השדה הראשון והבולט ביותר
- [ ] ולידציה: ת.ז. 9 ספרות, טלפון 10 ספרות, אימייל בפורמט תקין

### Auto-Search by ID Number
- [ ] הקלדת 9 ספרות בשדה ת.ז. מפעילה חיפוש אוטומטי (debounce 500ms)
- [ ] אם הלקוח קיים → מילוי אוטומטי של כל השדות + badge "לקוח קיים"
- [ ] אם הלקוח לא קיים → badge "לקוח חדש" והמשתמש ממלא ידנית
- [ ] מציג מצב טעינה בזמן החיפוש

### Declaration Creation with Client
- [ ] בשליחת הטופס: אם לקוח קיים (לפי ת.ז.) → מעדכן את הפרטים שלו
- [ ] אם לא קיים → יוצר לקוח חדש אוטומטית
- [ ] יוצר הצהרה ומקשר ללקוח
- [ ] שולח מייל ללקוח עם קישור לפורטל (התנהגות קיימת)

### Navigation Cleanup
- [ ] הסרת "לקוחות" מתפריט הצד
- [ ] מחיקת עמודי הלקוחות (`/dashboard/clients/*`)
- [ ] השארת actions.ts של לקוחות - יש פונקציות בשימוש

## Dependencies

- `use-debounce` package - לחיפוש אוטומטי עם debounce
- קומפוננטות shadcn קיימות: Card, Input, Label, Button, Badge, Separator
- Hebrew constants ב-`src/lib/constants/hebrew.ts`
- Drizzle ORM לשאילתות

## Out of Scope

- שינויים בפורטל הלקוח
- שינויים בעמוד פרטי הצהרה קיימת
- היסטוריית הצהרות קודמות של הלקוח בטופס
